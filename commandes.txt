#KAFKA - ZOOKEEPER

.\zookeeper-server-start.bat ..\..\config\zookeeper.properties
.\kafka-server-start.bat ..\..\config\server.properties
.\kafka-topics.bat --bootstrap-server localhost:9092 --create --replication-factor 1 --partitions 1 --topic topic1
.\kafka-topics.bat --bootstrap-server localhost:9092 --create --replication-factor 1 --partitions 1 --topic topic2
.\kafka-topics.bat --bootstrap-server localhost:9092 --create --replication-factor 1 --partitions 1 --topic topic3
.\kafka-topics.bat --bootstrap-server localhost:9092 --describe --topic topic1
.\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic topic1 --from-beginning

# POSTGRESQL

## Creation de la BDD + requete d'insertion
\c HOPSIIA
CREATE TABLE public.covid (id integer NOT NULL, data jsonb NOT NULL, date_update VARCHAR(255));
INSERT INTO covid VALUES (1, '{}', CURRENT_TIME);
UPDATE public.covid SET data='$JSON$', date_update='$UPDATE_DATE$' WHERE id=1;

## Requetes utilisees pour les commandes
SELECT data FROM public.covid WHERE id=1;
SELECT data->'Global' FROM public.covid WHERE id=1;
SELECT elem FROM ( SELECT jsonb_array_elements(data->'Countries') elem FROM public.covid WHERE id=1 ) sub WHERE elem->>'CountryCode'='FR';
SELECT data->'Countries' FROM public.covid WHERE id=1;